<!DOCTYPE html>
<html>
<head>
<title>Proforma Invoice</title>

<style>
body { font-family: Arial; font-size: 14px; margin: 20px; }

/* HEADER */
.header {
    display: flex;
    align-items: center;
    border-bottom: 2px solid #000;
    padding-bottom: 10px;
    margin-bottom: 15px;
}
.logo { width: 20%; }
.logo img { max-width: 120px; }
.company {
    width: 80%;
    text-align: center;
}
.company h2 { margin: 0; }
.company p { margin: 3px 0; font-size: 13px; }

/* TABLE */
table { width: 100%; border-collapse: collapse; margin-top: 10px; }
table, th, td { border: 1px solid #000; }
th, td { padding: 6px; text-align: center; }
th { background: yellow; }

/* TOTAL TABLE */
.total-table { width: 40%; float: right; margin-top: 15px; }

/* PRINT */
button { padding: 8px 15px; background: #1a73e8; color: #fff; border: none; cursor: pointer; }
@media print { button { display: none; } body { margin: 0; } }
</style>
</head>

<body>

<button onclick="window.print()">Print / Save PDF</button>

<!-- COMPANY HEADER -->
<div class="header">
    <div class="logo">
        <img src="logo.png" alt="Company Logo">
    </div>
    <div class="company">
        <h2>GLS GLOBAL LAB SOLUTIONS PVT LTD</h2>
        <p>
            Unit 315-316-317, 3rd Floor, Tower A, Plot No. 4B, THE ADDRESS<br>
            Mayur Vihar Phase 1 Extn., East Delhi, New Delhi - 110091
        </p>
        <p><b>GST No:</b> 07AAJCG8021F1ZQ</p>
    </div>
</div>

<h3 align="center">PROFORMA INVOICE</h3>

<table>
<tr>
    <td><b>PI No:</b> <span id="pi_no"></span></td>
    <td><b>PI Date:</b> <span id="pi_date"></span></td>
</tr>
<tr>
    <td><b>PO No:</b> <span id="po_no"></span></td>
    <td><b>PO Date:</b> <span id="po_date"></span></td>
</tr>
<tr>
    <td colspan="2"><b>Consignee:</b> <span id="customer"></span></td>
</tr>
<tr>
    <td><b>BILL TO:</b><br><span id="bill_to"></span></td>
    <td><b>SHIP TO:</b><br><span id="ship_to"></span></td>
</tr>
<tr>
    <td colspan="2"><b>GSTIN:</b> <span id="gstin"></span></td>
</tr>
</table>

<table>
<thead>
<tr>
<th>Sr</th>
<th>Product</th>
<th>CAS</th>
<th>CAT</th>
<th>SIZE</th>
<th>HSN</th>
<th>Qty</th>
<th>Rate</th>
<th>Total</th>
</tr>
</thead>
<tbody id="items"></tbody>
</table>

<!-- TOTALS -->
<table class="total-table">
<tr><td>Subtotal</td><td>₹ <span id="subtotal"></span></td></tr>
<tr>
    <td>Discount (<span id="discountPercent"></span>%)</td>
    <td>₹ <span id="discountAmount"></span></td>
</tr>
<tr><td>Freight</td><td>₹ <span id="freight"></span></td></tr>
<tr>
    <td>GST (<span id="gstPercent"></span>%)</td>
    <td>₹ <span id="gstAmount"></span></td>
</tr>
<tr><th>Grand Total</th><th>₹ <span id="grandTotal"></span></th></tr>
</table>

<br style="clear:both">

<p><b>Amount in Words:</b> <span id="amount_words"></span></p>

<!-- BANK DETAILS -->
<h3>Bank Details</h3>
<p>
<b>Bank:</b> ICICI Bank, Mayur Vihar Phase 1 Branch<br>
<b>Account No:</b> 629705019270<br>
<b>IFSC:</b> ICIC0006297
</p>

<h3>Terms & Conditions</h3>
<p id="terms"></p>

<br><br>
<p align="right">
For <b>GLS GLOBAL LAB SOLUTIONS PVT LTD</b><br><br><br>
<b>Authorised Signatory</b>
</p>

<script>
const p = new URLSearchParams(window.location.search);

/* BASIC DETAILS */
["pi_no","pi_date","po_no","po_date","customer","bill_to","ship_to","gstin","terms"]
.forEach(id => document.getElementById(id).innerText = p.get(id) || '');

/* ITEMS */
let products=p.getAll("product[]"),
cas=p.getAll("cas[]"),
cat=p.getAll("cat[]"),
size=p.getAll("size[]"),
hsn=p.getAll("hsn[]"),
qty=p.getAll("qty[]"),
price=p.getAll("price[]");

let subtotal=0;
let tbody=document.getElementById("items");

for(let i=0;i<products.length;i++){
    let total=qty[i]*price[i];
    subtotal+=total;
    tbody.innerHTML+=`
    <tr>
        <td>${i+1}</td>
        <td>${products[i]}</td>
        <td>${cas[i]}</td>
        <td>${cat[i]}</td>
        <td>${size[i]}</td>
        <td>${hsn[i]}</td>
        <td>${qty[i]}</td>
        <td>${(+price[i]).toFixed(2)}</td>
        <td>${total.toFixed(2)}</td>
    </tr>`;
}

/* CALCULATIONS */
let discountPercent=+p.get("discount")||0;
let gstPercent=+p.get("gst")||0;
let freight=+p.get("freight")||0;

let discountAmount=subtotal*discountPercent/100;
let gstAmount=(subtotal-discountAmount+freight)*gstPercent/100;
let grandTotal=Math.round(subtotal-discountAmount+freight+gstAmount);

/* DISPLAY */
document.getElementById("subtotal").innerText=subtotal.toFixed(2);
document.getElementById("discountPercent").innerText=discountPercent;
document.getElementById("discountAmount").innerText=discountAmount.toFixed(2);
document.getElementById("freight").innerText=freight.toFixed(2);
document.getElementById("gstPercent").innerText=gstPercent;
document.getElementById("gstAmount").innerText=gstAmount.toFixed(2);
document.getElementById("grandTotal").innerText=grandTotal;
document.getElementById("amount_words").innerText=p.get("amount_words");
</script>

</body>
</html>
